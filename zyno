--!syncconfig
local UIS = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- 🔫 Aimbot Logic
local function AimAtClosest()
    local maxDist = math.huge
    local target = nil
    local camera = workspace.CurrentCamera
    
    for _, player in next, Players:GetPlayers() do
        if player == LocalPlayer or not player.Character then continue end
        
        local head = player.Character:FindFirstChild("Head")
        if not head then continue end
        
        local screenPos, onScreen = camera:WorldToScreenPoint(head.Position)
        if onScreen then
            local dist = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Mouse.X, Mouse.Y)).Magnitude
            if dist < maxDist then
                maxDist = dist
                target = head
            end
        end
    end
    
    if target then
        mousemoverel(
            (target.Position.X - camera.CFrame.Position.X) * 10,
            (target.Position.Y - camera.CFrame.Position.Y) * 5
        )
    end
end

-- 🖥️ ImGui Menu
local menuOpen = false
local features = {
    Aimbot = true,
    ESP = false,
    SpeedHack = 1.0,
    InfiniteJump = false,
    MoonGravity = false,
    RainbowChar = false
}

UIS.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightShift then
        menuOpen = not menuOpen
    end
end)

game:GetService("RunService").RenderStepped:Connect(function()
    -- 🔫 Activate Aimbot on Right-Click
    if UIS:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) and features.Aimbot then
        AimAtClosest()
    end
    
    -- 🎨 Draw ImGui Menu
    if menuOpen then
        local success, _ = pcall(function()
            -- Start ImGui Window
            imgui.Begin("🔥 REBEL HACK MENU", true, imgui.WindowFlags.AlwaysAutoResize)
            
            -- Random Features
            features.Aimbot = imgui.Checkbox("AIMBOT (Hold Right-Click)", features.Aimbot)
            features.ESP = imgui.Checkbox("WALLHACK ESP", features.ESP)
            features.SpeedHack = imgui.SliderFloat("SPEED MULTIPLIER", features.SpeedHack, 1.0, 10.0)
            features.InfiniteJump = imgui.Checkbox("INFINITE JUMP", features.InfiniteJump)
            features.MoonGravity = imgui.Checkbox("MOON GRAVITY", features.MoonGravity)
            features.RainbowChar = imgui.Checkbox("RAINBOW CHARACTER", features.RainbowChar)
            
            if imgui.Button("CRASH SERVER (DANGER)") then
                while true do end -- 💣 Freeze client for chaos
            end
            
            imgui.End()
        end)
    end
end)

-- ✨ Apply Features (Example: SpeedHack)
game:GetService("RunService").Heartbeat:Connect(function()
    if features.SpeedHack > 1.0 and LocalPlayer.Character then
        LocalPlayer.Character.Humanoid.WalkSpeed = 16 * features.SpeedHack
    end
end)
